<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>SwitchBot起動</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- =======================
       CSS：中央配置 + 文字スタイル + バージョン表示
       ======================= -->
  <style>
    html, body {
      height: 100%;                  
      margin: 0;                     
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f8f8f8;
      display: flex;
      flex-direction: column;
      justify-content: center;       
      align-items: center;           
    }

    /* メインメッセージ */
    .message {
      font-size: 20px;               
      font-weight: bold;
      color: #333;
      line-height: 1.5;
      margin: 0 20px;
      max-width: 90%;                
    }

    /* 右下バージョン表示 */
    .version {
      position: fixed;               
      bottom: 10px;
      right: 10px;
      font-size: 11px;
      color: #666;
      text-align: right;
    }
  </style>
</head>
<body>

  <!-- =======================
       メインメッセージ
       ======================= -->
  <p class="message">
    SwitchBotアプリを起動しました。<br>
    完了したらこの画面を閉じてください。
  </p>

  <!-- =======================
       バージョン表示
       ======================= -->
  <div class="version" id="version"></div>

  <!-- =======================
       JavaScript：iOS自動起動 / Androidはストア自動起動
       ======================= -->
  <script>
    // -----------------------
    // ① HTMLバージョン番号
    // -----------------------
    var appVersion = "V14"; // このHTMLのバージョン管理

    // -----------------------
    // ② iOSスキーム＆App Store URL
    // -----------------------
    var appURL_iOS = "switchbot://?v=" + appVersion; // iOSアプリスキーム
    var storeURL_iOS = "https://apps.apple.com/jp/app/switchbot/id1087374761"; // iOS App Store

    // -----------------------
    // ③ Androidは直接Google PlayストアURL
    // -----------------------
    var storeURL_Android = "https://play.google.com/store/apps/details?id=com.theswitchbot.switchbot";

    // -----------------------
    // ④ 右下バージョン表示を反映
    // -----------------------
    var versionElem = document.getElementById("version");
    versionElem.textContent = "バージョン: " + appVersion;

    // -----------------------
    // ⑤ ユーザーエージェント判定
    // -----------------------
    var ua = navigator.userAgent || navigator.vendor || window.opera;
    var isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream; // iOS判定
    var isAndroid = /android/i.test(ua);                          // Android判定

    // =======================
    // iOS自動起動処理（従来通り）
    // =======================
    if (isIOS) {
      // ① アプリスキームで起動
      window.location.href = appURL_iOS;

      // ② 2秒後にApp Storeへ誘導（未インストールの場合の保険）
      setTimeout(function() {
        window.location.href = storeURL_iOS;
      }, 2000);
    }

    // =======================
    // Android自動ストア起動（ボタンなし）
    // =======================
    if (isAndroid) {
      // Androidはスキーム起動を使わず、直接Playストアを開く
      window.location.href = storeURL_Android;
    }

    // =======================
    // PCや非スマホ端末向け表示
    // =======================
    if (!isIOS && !isAndroid) {
      // スマホ以外では案内メッセージを表示
      document.body.innerHTML = "<p class='message'>スマートフォンからアクセスしてください。</p>";
    }
  </script>
</body>
</html>
