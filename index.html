<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>SwitchBot起動</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- =======================
       CSS：中央配置・文字スタイル + 右下バージョン表示
       ======================= -->
  <style>
    html, body {
      height: 100%;                  /* 画面全体を使用 */
      margin: 0;                     /* デフォルト余白を削除 */
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f8f8f8;
      display: flex;
      flex-direction: column;
      justify-content: center;       /* 垂直方向中央 */
      align-items: center;           /* 水平方向中央 */
    }

    /* メインメッセージ */
    .message {
      font-size: 20px;               /* 本文文字サイズ */
      font-weight: bold;
      color: #333;
      line-height: 1.5;
      margin: 0 20px;
      max-width: 90%;                /* スマホでも読みやすく幅を制限 */
    }

    /* 右下バージョン表示 */
    .version {
      position: fixed;               /* 画面に固定 */
      bottom: 10px;                  /* 下から10px */
      right: 10px;                   /* 右から10px */
      font-size: 11px;               /* バージョン文字サイズ */
      color: #666;
      text-align: right;
    }
  </style>

  <!-- =======================
       JavaScript：アプリ起動＆ストア誘導（iOS & Android Intent URL方式）
       ======================= -->
  <script>
    window.onload = function() {

      // -----------------------
      // ① バージョン番号（右下表示用）
      // -----------------------
      var appVersion = "V10";

      // -----------------------
      // ② iOS用アプリスキーム（起動用URL）
      // -----------------------
      var appURL_iOS = "switchbot://?v=" + appVersion;

      // -----------------------
      // ③ iOS App Store URL（バージョン不要）
      // -----------------------
      var storeURL_iOS = "https://apps.apple.com/jp/app/switchbot/id1087374761";

      // -----------------------
      // ④ Android PlayストアURL（バージョン不要）
      // -----------------------
      var storeURL_Android = "https://play.google.com/store/apps/details?id=com.theswitchbot.switchbot";

      // -----------------------
      // ⑤ 右下バージョン表示を自動生成
      // -----------------------
      var versionElem = document.createElement("div");
      versionElem.className = "version";                 // CSSクラス設定
      versionElem.textContent = "バージョン: " + appVersion; // 表示文字列設定
      document.body.appendChild(versionElem);            // bodyに追加して表示

      // -----------------------
      // ⑥ ユーザーエージェント取得
      // -----------------------
      var ua = navigator.userAgent || navigator.vendor || window.opera;

      // =======================
      // iOS端末判定
      // =======================
      if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {

        // アプリ起動を試みる
        window.location.href = appURL_iOS;

        // 2秒後にApp Storeに誘導（未インストール時）
        setTimeout(function() {
          window.location.href = storeURL_iOS;
        }, 2000);
      }

      // =======================
      // Android端末判定（Intent URL方式）
      // =======================
      else if (/android/i.test(ua)) {

        // Intent URLでアプリ起動
        // Chromeではインストール済みならアプリ起動、未インストールならPlayストア誘導
        var intentURL = "intent://#Intent;"
                      + "scheme=switchbot;"                    // アプリスキーム
                      + "package=com.theswitchbot.switchbot;" // パッケージ名
                      + "end";                                 // Intent終了

        window.location.href = intentURL;
      }

      // =======================
      // その他端末（PCなど）
      // =======================
      else {
        // スマホ以外は案内メッセージ表示
        document.body.innerHTML = "<p class='message'>スマートフォンからアクセスしてください。</p>";
        document.body.appendChild(versionElem); // バージョン表示も追加
      }
    }
  </script>
</head>
<body>
  <!-- =======================
       メインメッセージ（中央表示）
       ======================= -->
  <p class="message">
    SwitchBotアプリを起動しました。<br><br>
    完了したらこの画面を閉じてください。
  </p>
</body>
</html>
